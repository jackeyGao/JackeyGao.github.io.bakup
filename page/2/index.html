<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo,next" />





  <link rel="alternate" href="/atom.xml" title="æ–‡æœ¬ä¸é™, è¯—æ­Œé™¤å¤–" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />






<meta name="description" content="Jackey Gaoçš„æ—¥è®°æœ¬">
<meta property="og:type" content="website">
<meta property="og:title" content="æ–‡æœ¬ä¸é™, è¯—æ­Œé™¤å¤–">
<meta property="og:url" content="http://omem.me/page/2/index.html">
<meta property="og:site_name" content="æ–‡æœ¬ä¸é™, è¯—æ­Œé™¤å¤–">
<meta property="og:description" content="Jackey Gaoçš„æ—¥è®°æœ¬">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ–‡æœ¬ä¸é™, è¯—æ­Œé™¤å¤–">
<meta name="twitter:description" content="Jackey Gaoçš„æ—¥è®°æœ¬">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: "post",
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 509455,
      author: 'åšä¸»'
    }
  };
</script>

  <title> æ–‡æœ¬ä¸é™, è¯—æ­Œé™¤å¤– </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  








  <div style="display: none;">
    <script src="http://s6.cnzz.com/stat.php?id=1258527046&web_id=1258527046" type="text/javascript"></script>
  </div>





  
  

  <div class="container one-collumn  
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">æ–‡æœ¬ä¸é™, è¯—æ­Œé™¤å¤–</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/02/use-conoha/" itemprop="url">
                  Conohaä¸»æœºæµ‹è¯„
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-11-02T15:41:12+08:00" content="2015-11-02">
              2015-11-02
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/02/use-conoha/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/02/use-conoha/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/11/02/use-conoha/" class="leancloud_visitors" data-flag-title="Conohaä¸»æœºæµ‹è¯„">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ€è¿‘ç”±äºå¿ƒçŸ¥è‚šæ˜åŸå› ï¼Œ åŸæ¥çš„linodeä¸»æœºå·²ä¸èƒ½ä½¿ç”¨ã€‚æ‰€ä»¥æœ€è¿‘åˆå¼€å§‹äº†ç–¯ç‹‚æ‰¾ä¸»æœºçš„å†ç¨‹ï¼Œ è¯´èµ·è¿™ä¸ªç®€ç›´ä¸èƒ½æèµ·ã€‚ æˆ‘æœ¬äººä¹Ÿè¿ç»­æ‰¾äº†å¥½å¤šå®¶ï¼Œ linodeæ›´æ¢äº†ä¸€æ¬¡ipä¾ç„¶ä¸èƒ½è®¿é—®ã€‚ç„¶ååˆæ‰¾äº†æ¬ç“¦å·¥ï¼Œ æ— å¥ˆé€Ÿåº¦ç®€ç›´ä¸èƒ½å¿å—ï¼Œ æ‰“å¼€é“¾æ¥çš„æ—¶é—´èƒ½è®©æˆ‘ç»†å“ä¸€æ¯èŒ¶.</p>
<p>å†åæ¥å°±æ‰¾åˆ°conoha ï¼Œ è¯´èµ·conohaä¹‹å‰æˆ‘æ³¨å†Œè¿‡ï¼Œ è€Œä¸”ä½¿ç”¨åˆ«äººæ¨èé“¾æ¥æ³¨å†Œï¼Œç„¶ååŠ ä¸Šæ´»åŠ¨é€çš„1000æ—¥å…ƒæ€»å…±2000æ—¥å…ƒï¼Œä»–ä»¬å®¶ä¸œäº¬æœºæˆ¿æ˜¯900å…ƒï¼Œ  è¿™äº›èƒ½ç”¨ä¸¤ä¸ªæœˆçš„æ—¥æœ¬æœºæˆ¿</p>
<p>å¼€ç«¯æ€»æ˜¯ä¸å¥½çš„ã€‚ æˆ‘åˆ›å»ºç¬¬ä¸€ä¸ªä¸»æœºé™¤äº†22ç«¯å£å¤–ï¼Œ å…¶ä»–ç«¯å£å‡ä¸é€š.ç„¶åæ‰¾å®¢æœï¼Œ è¦æ±‚æ›´æ¢ipã€‚ å®¢æœå‘ŠçŸ¥ä¸ºä¸èƒ½æ›´æ¢ip.ç„¶åä»–ä»¬æä¾›äº†ä¸€ç§æ–¹æ³•æ¥æ›´æ¢. å…ˆåˆ›å»ºå¦å¤–ä¸€å°ï¼Œ ç„¶åæŠŠè¿™å°æœºå™¨åˆ é™¤.å…¨ç¨‹èŠå¤©ä»–ä»¬ä¸€ç›´ç”¨æ—¥æœ¬è¯­ï¼Œå¾ˆæ˜¯æ— è¯­ğŸ˜“.</p>
<p>ç¬¬äºŒå°ï¼Œ å»¶è¿Ÿæ—¶é—´æ¯”ç¬¬ä¸€å°å°‘, å¤§æ¦‚133ms</p>
<p>å¦‚æ­¤å‘¨æŠ˜ï¼Œ ç®—æ˜¯æ‰¾åˆ°ä¸€ä¸ªç›¸å¯¹é è°±çš„vpsäº†ã€‚ conoha æ˜¯æŒ‰ç…§æ—¶é—´è¿›è¡Œè®¡è´¹çš„ï¼Œ å°½å¿«æŠŠä¹‹å‰çš„ä¸»æœºåˆ é™¤å³å¯.</p>
<p>ä½¿ç”¨æ¨èé“¾æ¥ä¼šæœ‰ä¼˜æƒ ã€‚</p>
<p><a href="https://www.conoha.jp/referral/?token=587K1ucxrGKjarxl9o.8AJxc718ZZfdHt9QFr5HR9_DprBM._ZI-AHH" target="_blank" rel="external">æˆ‘æ˜¯é“¾æ¥</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/04/illusion-and-reality/" itemprop="url">
                  å¹»æƒ³ä¸ç°å®
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-10-04T20:48:51+08:00" content="2015-10-04">
              2015-10-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/éšç¬”/" itemprop="url" rel="index">
                    <span itemprop="name">éšç¬”</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/04/illusion-and-reality/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/04/illusion-and-reality/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/10/04/illusion-and-reality/" class="leancloud_visitors" data-flag-title="å¹»æƒ³ä¸ç°å®">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/uploads/images/photo-1440964829947-ca3277bd37f8.jpeg" alt=""></p>
<p>æˆ‘æ˜¯ä¸ªä¼šæ„æ·«çš„äººï¼Œ ä»è‡ªå·±çš„çˆ±æƒ…ï¼Œ åˆ°è‡ªå·±çš„äº‹ä¸šï¼Œ æ€»æ˜¯æ†§æ†¬é‚£ä¹ˆç¾å¥½çš„äº‹æƒ…ã€‚æ—¶é—´å¯ä»¥æ˜¯å°†æ¥ï¼Œ å¯ä»¥æ˜¯è¿‡å»ï¼Œ ä½†æ€»æ˜¯ç¾å¥½ã€‚ å½“ä¸€ä¸ªäººçš„æ—¶å€™ï¼Œ ç‰¹åˆ«æ˜¯æ™šä¸Šç¡è§‰çš„ä¹‹å‰çš„åŠä¸ªå°æ—¶ï¼Œ æ€»èƒ½æƒ³åˆ°å¾ˆå¤šä¸å¯æ€è®®çš„éæƒ³ï¼Œ è¿™äº›éæƒ³å¤ªç¾å¦™äº†ï¼Œ è®©æˆ‘ä¸å¯è‡ªæ‹”ï¼Œ æ¯å¤©æ™šä¸Šæˆ‘éƒ½ä¼šæƒ³è±¡è¿™äº›ç¾å¥½çš„äº‹æƒ…ï¼Œ æœ‰æ—¶å€™å¼€å§‹ä¸€ä¸ªæ–°çš„æ„æ·«ï¼Œ æœ‰æ—¶å€™åˆ™æ¥ç€ä¹‹å‰çš„å‰§æƒ…å‘å±•ï¼Œ æœŸé—´æˆ‘æ— æ•°æ¬¡å‘Šè¯‰è‡ªå·±è¿™æ˜¯å‡çš„ï¼Œ é©¬ä¸Šåœæ­¢ä¸‹æ¥ç»§ç»­ä½ çš„ç¡çœ ï¼Œ å¯æ˜¯è¶Šæ˜¯ç¾å¥½è¶Šè®©æˆ‘å¿ƒæ½®æ¾æ¹ƒï¼Œ æ¿€åŠ¨å¤„æˆ‘æœ‰æ—¶èƒ½å¾®ç¬‘ï¼Œ æœ‰æ—¶å€™èƒ½æ„ŸåŠ¨åˆ°æµæ³ªï¼Œ ç„¶åå†æ— ç¡æ„ã€‚</p>
<p>ä¸å¾—ä¸è¯´ï¼Œ è¿™äº›æƒ³è±¡çœŸçš„å¾ˆéš¾å®ç°ï¼Œ å¤ªè¿‡äºè™šå¹»ã€ç¾å¥½ã€ å®Œç¾ã€‚æˆ‘ä¸çŸ¥é“è¿™ä¸ªæ˜¯ä¸æ˜¯ç—…ï¼Œ æˆ‘æƒ³è¿™æ˜¯æ¯ä¸ªäººçš„å…±æ€§ï¼Œ éƒ½ä¼šä¸€è‡´çš„å¹»æƒ³è‡ªå·±ä¸°è¡£è¶³é£Ÿï¼Œ æ€»æ˜¯å¾ˆè½»æ¾ï¼Œ ä¸ä¼šä¸ºæœªæ¥æ‹…å¿§ï¼Œ ä¸åæ‚”è¿‡å»ï¼Œ å› ä¸ºè¿‡å»æ˜¯æŒ‰ç…§è‡ªå·±çš„è®¾æƒ³è¿‡æ¥çš„ã€‚ å¦‚æœæˆ‘è®©è¿™äº›å†™å‡ºæ¥ï¼Œ ä¼°è®¡ä¹Ÿæ˜¯å±Œä¸é€†è¢­äººç”Ÿçš„å¤§å‰§ï¼Œ ä¼šå¸å¼•åŒç±»ç—…ç§äººç¾¤å¤§é‡è§‚çœ‹ï¼Œ æˆ‘ä¹Ÿå°±æˆäº†ä¸€ä½æœ‰ç—…çš„ä¼Ÿå¤§ç¼–å‰§ã€‚æ¯æ¬¡éƒ½ä¸èƒ½ä» YY ä¸­æŠŠæˆ‘è‡ªå·±å”¤é†’ï¼Œ æ„Ÿè§‰æ˜¯è¢«å¹»æƒ³å¬å”¤èµ°äº†ï¼Œ æˆ‘è·Ÿç€è¿™ç§å¿ƒç†ä¸æ–­åˆ›é€ å‡ºç¾å¥½ï¼Œ å¹¶è¢«è¿™äº›ç¾å¥½å¸å¼•ï¼Œ å¸å¼•ç€æˆ‘æŒç»­è¾“å‡ºæ›´ç¾çš„ç»“å±€ï¼Œ è®©æˆ‘ä¸èƒ½ç†è§£çš„æ˜¯è¿™äº›åˆ›é€ æˆ‘ä¹Ÿä¼šæ ¹æ®è‡ªèº«å’Œç¤¾ä¼šå› ç´ æ¥å…‹åˆ¶ï¼Œ æ‰€ä»¥åœ¨æˆ‘ç³Šæ¶‚çš„å¹»æƒ³ä¸­æˆ‘è®¤ä¸ºè¿™äº›å°±æ˜¯ç°å®ï¼Œ ä¹‹åæˆ‘å®Œå…¨ä¸èƒ½è‡ªæ‹”ã€‚</p>
<p>æœ€è¿‘è¶Šæ¥è¶Šä¸¥é‡äº†ï¼Œ æˆ‘åˆ°ç½‘ä¸ŠæŸ¥äº†æŸ¥è¿™ç§çŠ¶å†µæ˜¯å¦æ­£å¸¸ï¼Œ å…¶å®æˆ‘æ·±çŸ¥è¿™æ˜¯ä¸æ­£å¸¸çš„è¡¨ç°ã€‚ åªæ˜¯æƒ³çŸ¥é“ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿè¿™ç§ä¸å¥åº·çš„ç”Ÿæ´»ä¹ æƒ¯ï¼Œ æŸ¥æ¥æŸ¥å»ç»™å‡ºæœ€å¤šæ˜¯å¤±çœ é€ æˆçš„è„‘è¢‹ç©ºæƒ³ã€‚æˆ‘å¹¶ä¸åœ¨ä¹è¿™ç§ç—…åœ¨å¹¶å‘èƒ½ç»™æˆ‘æœ‰å¤šå¤§å±å®³ï¼Œ ä½†æ¯æ¬¡æ—©ä¸Šæˆ‘éƒ½æ­»æ°”æ²‰æ²‰ï¼Œ è§‰å¾—å¥½åƒå¤±æ‹ä¸€æ ·ï¼Œ ç”šè‡³äº§ç”Ÿä¸€ç§åŒä¸–çš„å¿ƒæ€ï¼Œ æˆ‘çŸ¥é“å¯èƒ½å’Œæˆ‘æ™šä¸Šç©ºæƒ³æœ‰å…³ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/30/django-url-reverse/" itemprop="url">
                  Django url åè§£æ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-09-30T14:07:20+08:00" content="2015-09-30">
              2015-09-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/Django/" itemprop="url" rel="index">
                    <span itemprop="name">Django</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/30/django-url-reverse/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/30/django-url-reverse/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/30/django-url-reverse/" class="leancloud_visitors" data-flag-title="Django url åè§£æ">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Django æ˜¯ä¸ªpythonä¸­web-framework<br>MTVæ¡†æ¶èƒ½å¤Ÿå¿«é€Ÿçš„å¼€å‘ç½‘ç«™, åˆšå¼€å§‹å­¦ä¹ djangoæ—¶å€™ï¼Œ å¯¹äºæ¨¡ç‰ˆé‡Œé¢ç»å¸¸æ ¹æ®è‡ªå·±é¡¹ç›®çš„<code>urls</code>æ¥æ‰‹å†™é“¾æ¥.<br>è™½ç„¶è¿™ç§æ–¹æ³•æ˜¯å¯è¡Œçš„ï¼Œ ä½†æ˜¯ä¸æ˜¯è§„èŒƒçš„ã€‚<br>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>æœ€è¿‘å…¬å¸è¦åšä¸€ä¸ªdjangoæ”¹é€ ï¼Œ ç”±äºæ”¹é€ éœ€æ±‚çš„åŸå› ï¼Œ é¡¹ç›®urlsç»Ÿä¸€åŠ ä¸Š<code>é¡¹ç›®åå­—</code><br>urls.py ä¸­å¾ˆç®€å•ï¼Œ åœ¨urlå‰é¢åŠ ä¸Šå°±è¡Œ. ä½†æ˜¯å¾ˆå¤šçš„æ¨¡ç‰ˆä¸­çš„urléƒ½è¦æ”¹æ‰. è¿™å°±å¢åŠ äº†æ”¹é€ çš„å¤æ‚åº¦ã€‚<br>é€šè¿‡æ­¤æ¬¡æ”¹é€ æˆ‘å‘ç°<br>å…¶å®djangoä¸­æœ‰ä¸€ç§å¾ˆå¥½çš„æœºåˆ¶, æ¥é€šè¿‡urlsä¸­çš„viewname æ¥åè§£æurlç”Ÿæˆurl.</p>
<p>ä»–ä»¬åˆ†åˆ«æ˜¯: <code>django.core.urlresolvers.reverse</code> å’Œ <code>templatetags.url</code></p>
<h2 id="django-core-urlresolvers-reverse">django.core.urlresolvers.reverse</h2><p>è¿™ä¸ªå‡½æ•°ä¸»è¦ç”¨åœ¨äºpythonä»£ç ä¸­ï¼Œ è¯¦æƒ…è¯·çœ‹ä¸‹é¢æ¡ˆä¾‹</p>
<p><code>urls.py</code>è¿™é‡Œæ˜¯ä¸€ä¸ªå¯¹è±¡è¯¦ç»†é¡µé¢, éœ€è¦ä¸¤ä¸ªå‚æ•°.<br><code>models.py</code>ä¸­è¦é€šè¿‡<code>viewname</code> detail æ¥ç”Ÿæˆurl.</p>
<h3 id="urls-py">urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    url(<span class="string">r'^step/(?P&lt;label&gt;.*)/(?P&lt;name&gt;.*)$'</span>, step, name=<span class="string">"detail"</span>),</span><br><span class="line">    ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="models-py">models.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Step</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    ......</span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_absolute_url</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> reverse(<span class="string">'detail'</span>, kwargs=&#123;</span><br><span class="line">            <span class="string">'label'</span>: self.label,</span><br><span class="line">            <span class="string">'name'</span>: self.name&#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">label_name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.label.name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__unicode__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> unicode(self.name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br></pre></td></tr></table></figure>
<h2 id="templatetags-url">templatetags.url</h2><p>è¿™é‡Œè¿˜ä½¿ç”¨ä¸Šé¢çš„urls.py ä¸­çš„detailä¸¾ä¾‹, åœ¨æ¨¡ç‰ˆä¸­ç”Ÿæˆurl</p>
<h3 id="base-html">base.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% url "detail" step.label.name step.name %&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/30/show-your-top-command/" itemprop="url">
                  æŸ¥çœ‹ä½ å†å²å‘½ä»¤çš„ä½¿ç”¨ç‡
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-09-30T13:46:55+08:00" content="2015-09-30">
              2015-09-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/30/show-your-top-command/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/30/show-your-top-command/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/30/show-your-top-command/" class="leancloud_visitors" data-flag-title="æŸ¥çœ‹ä½ å†å²å‘½ä»¤çš„ä½¿ç”¨ç‡">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¸€ä¸ªæŸ¥çœ‹å†å²å‘½ä»¤çš„ä½¿ç”¨ç‡å·¥å…·ï¼Œ å› ä¸ºçœ‹åˆ°<code>oh-my-zsh</code>é¡¹ç›®ä¸­çš„<code>zsh_stats</code>function åæœ‰æ„Ÿä»¿ç…§å¼€å‘äº†ä¸€ä¸ªã€‚ æœ¬é¡¹ç›®ä¸ä»…æ”¯æŒ<code>zsh_history</code>è€Œä¸”æ”¯æŒ<code>bash_history</code> ã€‚ è¿˜æœ‰å¯æ‰©å±•çš„è¶‹åŠ¿.</p>
<h2 id="oh-my-zsh_ä¹‹_zsh_stats">oh-my-zsh ä¹‹ zsh_stats</h2><p>å¦‚æœä½ ç”¨<code>oh-my-zsh</code> ï¼Œ é‚£ä¹ˆä½ å°±æœ‰äº†è¿™ä¸ªåŠŸèƒ½ã€‚ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ zsh_stats</span><br><span class="line">     <span class="number">1</span>  <span class="number">3290</span>  <span class="number">32.9033</span>%   vim</span><br><span class="line">     <span class="number">2</span>  <span class="number">2204</span>  <span class="number">22.0422</span>%   python</span><br><span class="line">     <span class="number">3</span>  <span class="number">902</span>   <span class="number">9.0209</span>%    ls</span><br><span class="line">     <span class="number">4</span>  <span class="number">730</span>   <span class="number">7.30073</span>%   git</span><br><span class="line">     <span class="number">5</span>  <span class="number">449</span>   <span class="number">4.49045</span>%   <span class="built_in">cd</span></span><br><span class="line">     <span class="number">6</span>  <span class="number">194</span>   <span class="number">1.94019</span>%   curl</span><br><span class="line">     <span class="number">7</span>  <span class="number">170</span>   <span class="number">1.70017</span>%   pip</span><br><span class="line">     <span class="number">8</span>  <span class="number">168</span>   <span class="number">1.68017</span>%   ll</span><br><span class="line">     <span class="number">9</span>  <span class="number">157</span>   <span class="number">1.57016</span>%   scrapy</span><br><span class="line">    <span class="number">10</span>  <span class="number">142</span>   <span class="number">1.42014</span>%   rm</span><br><span class="line">    <span class="number">11</span>  <span class="number">96</span>    <span class="number">0.960096</span>%  cat</span><br><span class="line">    <span class="number">12</span>  <span class="number">78</span>    <span class="number">0.780078</span>%  hexo</span><br><span class="line">    <span class="number">13</span>  <span class="number">76</span>    <span class="number">0.760076</span>%  clear</span><br><span class="line">    <span class="number">14</span>  <span class="number">63</span>    <span class="number">0.630063</span>%  mkdir</span><br><span class="line">    <span class="number">15</span>  <span class="number">60</span>    <span class="number">0.60006</span>%   ping</span><br><span class="line">    <span class="number">16</span>  <span class="number">59</span>    <span class="number">0.590059</span>%  grep</span><br><span class="line">    <span class="number">17</span>  <span class="number">58</span>    <span class="number">0.580058</span>%  workon</span><br><span class="line">    <span class="number">18</span>  <span class="number">57</span>    <span class="number">0.570057</span>%  sudo</span><br><span class="line">    <span class="number">19</span>  <span class="number">57</span>    <span class="number">0.570057</span>%  docker</span><br><span class="line">    <span class="number">20</span>  <span class="number">55</span>    <span class="number">0.550055</span>%  mv</span><br><span class="line">$ <span class="built_in">which</span> zsh_stats <span class="comment"># oh-my-zsh å°è£…çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">zsh_stats</span></span> () &#123;</span><br><span class="line">    <span class="built_in">fc</span> <span class="operator">-l</span> <span class="number">1</span> | awk <span class="string">'&#123;CMD[$2]++;count++;&#125;END &#123; for (a in CMD)print CMD[a] " " CMD[a]/count*100 "% " a;&#125;'</span> | grep -v <span class="string">"./"</span> | column -c3 <span class="operator">-s</span> <span class="string">" "</span> -t | sort -nr | nl | head -n20</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="cmdstats_é¡¹ç›®">cmdstats é¡¹ç›®</h2><p>æŸ¥çœ‹ä½ ç»ˆç«¯å‘½ä»¤ä½¿ç”¨é¢‘ç‡åˆ—è¡¨, åŸç†æ˜¯é€šè¿‡å®¿ä¸»ç›®å½•ä¸‹çš„ <code>.*history</code> åˆ†æåå¾—åˆ°å†å²å‘½ä»¤ä½¿ç”¨é¢‘ç‡çŠ¶æ€ï¼Œ å¹¶ä¸”è¿›è¡Œæ’åºè¾“å‡º.</p>
<p>ç›®å‰æ”¯æŒ <code>~/.bash_history</code> ã€ <code>~/.zsh_history</code></p>
<h3 id="å®‰è£…">å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install git+https://github.com/jackeyGao/cmdstats.git</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨">ä½¿ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ cmdstats -h</span><br><span class="line">usage: cmdstats [-h] [<span class="operator">-l</span> LIMIT]</span><br><span class="line"></span><br><span class="line">optional arguments:</span><br><span class="line">  -h, --help            show this <span class="built_in">help</span> message and <span class="built_in">exit</span></span><br><span class="line">  <span class="operator">-l</span> LIMIT, --limit LIMIT</span><br><span class="line">                        æ˜¾ç¤ºæ¡æ•°[default: <span class="number">20</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ cmdstats</span><br><span class="line"><span class="number">1</span>   <span class="number">3612</span>  <span class="number">33.13154</span>%  vim</span><br><span class="line"><span class="number">2</span>   <span class="number">2473</span>  <span class="number">22.68391</span>%  python</span><br><span class="line"><span class="number">3</span>   <span class="number">1018</span>  <span class="number">9.33774</span>%   ls</span><br><span class="line"><span class="number">4</span>   <span class="number">692</span>   <span class="number">6.34746</span>%   git</span><br><span class="line"><span class="number">5</span>   <span class="number">487</span>   <span class="number">4.46707</span>%   <span class="built_in">cd</span></span><br><span class="line"><span class="number">6</span>   <span class="number">204</span>   <span class="number">1.87122</span>%   ll</span><br><span class="line"><span class="number">7</span>   <span class="number">194</span>   <span class="number">1.77949</span>%   curl</span><br><span class="line"><span class="number">8</span>   <span class="number">178</span>   <span class="number">1.63273</span>%   pip</span><br><span class="line"><span class="number">9</span>   <span class="number">157</span>   <span class="number">1.4401</span>%    scrapy</span><br><span class="line"><span class="number">10</span>  <span class="number">147</span>   <span class="number">1.34838</span>%   rm</span><br><span class="line"><span class="number">11</span>  <span class="number">98</span>    <span class="number">0.89892</span>%   cat</span><br><span class="line"><span class="number">12</span>  <span class="number">91</span>    <span class="number">0.83471</span>%   clear</span><br><span class="line"><span class="number">13</span>  <span class="number">86</span>    <span class="number">0.78885</span>%   ping</span><br><span class="line"><span class="number">14</span>  <span class="number">78</span>    <span class="number">0.71547</span>%   hexo</span><br><span class="line"><span class="number">15</span>  <span class="number">73</span>    <span class="number">0.6696</span>%    docker</span><br><span class="line"><span class="number">16</span>  <span class="number">71</span>    <span class="number">0.65126</span>%   mkdir</span><br><span class="line"><span class="number">17</span>  <span class="number">61</span>    <span class="number">0.55953</span>%   workon</span><br><span class="line"><span class="number">18</span>  <span class="number">60</span>    <span class="number">0.55036</span>%   grep</span><br><span class="line"><span class="number">19</span>  <span class="number">58</span>    <span class="number">0.53201</span>%   sudo</span><br><span class="line"><span class="number">20</span>  <span class="number">57</span>    <span class="number">0.52284</span>%   mv</span><br><span class="line">$ <span class="built_in">which</span> cmdstats</span><br><span class="line">/usr/<span class="built_in">local</span>/bin//cmdstats</span><br></pre></td></tr></table></figure>
<h3 id="é¡¹ç›®åœ°å€">é¡¹ç›®åœ°å€</h3><p><a href="https://github.com/jackeyGao/cmdstats" target="_blank" rel="external">jackeyGao/cmdstats</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/30/python-pillow/" itemprop="url">
                  ä½¿ç”¨Pythonå°†ä¸¤å¼ ç…§ç‰‡é€æ˜é‡å 
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-09-30T13:19:26+08:00" content="2015-09-30">
              2015-09-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/30/python-pillow/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/30/python-pillow/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/30/python-pillow/" class="leancloud_visitors" data-flag-title="ä½¿ç”¨Pythonå°†ä¸¤å¼ ç…§ç‰‡é€æ˜é‡å ">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>é€æ˜é‡å æœ€ä¸»è¦ç”¨çš„æ˜¯<code>Image.blend</code>æ–¹æ³•(è¯¦æƒ…è¯·çœ‹ç¬¬äºŒä¸ªä»£ç å—), ç¬¬ä¸€ä¸ªä»£ç å—ä¸»è¦æ˜¯å°†å¤šä¸ªå›¾ç‰‡å‰ªåˆ‡åˆ°ä¸€å¼ å¤§å›¾, ç„¶åç”¨è¿™å¼ å¤§å›¾å’Œå¦å¤–ä¸€å¼ éå‰ªåˆ‡çš„å¤§å›¾è¿›è¡Œé€æ˜é‡å ï¼Œ ä¸»è¦<code>Image.blend</code>æ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç›¸å¯¹äºç¬¬ä¸€å¼ å›¾ç‰‡é€æ˜åº¦ã€‚ </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">'''</span><br><span class="line">File Name: merge.py</span><br><span class="line">Author: JackeyGao</span><br><span class="line">mail: junqi.gao@shuyun.com</span><br><span class="line">Created Time: ä¸€  6/ 1 13:27:49 2015</span><br><span class="line">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_resize</span><span class="params">(img, size=<span class="params">(<span class="number">4</span>, <span class="number">3</span>)</span>)</span>:</span></span><br><span class="line">    <span class="string">"""è°ƒæ•´å›¾ç‰‡å¤§å°</span><br><span class="line">    """</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> img.mode <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">'L'</span>, <span class="string">'RGB'</span>):</span><br><span class="line">            img = img.convert(<span class="string">'RGB'</span>)</span><br><span class="line">        img = img.resize(size)</span><br><span class="line">    <span class="keyword">except</span> Exception, e:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_merge</span><span class="params">(images, output_dir=<span class="string">'output'</span>, output_name=<span class="string">'merge.jpg'</span>, \</span><br><span class="line">                restriction_max_width=None, restriction_max_height=None)</span>:</span></span><br><span class="line">    <span class="string">"""å‚ç›´åˆå¹¶å¤šå¼ å›¾ç‰‡</span><br><span class="line">    images - è¦åˆå¹¶çš„å›¾ç‰‡è·¯å¾„åˆ—è¡¨</span><br><span class="line">    ouput_dir - è¾“å‡ºè·¯å¾„</span><br><span class="line">    output_name - è¾“å‡ºæ–‡ä»¶å</span><br><span class="line">    restriction_max_width - é™åˆ¶åˆå¹¶åçš„å›¾ç‰‡æœ€å¤§å®½åº¦ï¼Œå¦‚æœè¶…è¿‡å°†ç­‰æ¯”ç¼©å°</span><br><span class="line">    restriction_max_height - é™åˆ¶åˆå¹¶åçš„å›¾ç‰‡æœ€å¤§é«˜åº¦ï¼Œå¦‚æœè¶…è¿‡å°†ç­‰æ¯”ç¼©å°</span><br><span class="line">    """</span></span><br><span class="line">    x_number = <span class="number">10</span> <span class="keyword">if</span> len(images) &gt;= <span class="number">5</span> <span class="keyword">else</span> len(images)</span><br><span class="line">    y_number = int(math.ceil(len(images) / x_number))</span><br><span class="line">    total_height = <span class="number">0</span></span><br><span class="line">    <span class="comment"># è®¡ç®—åˆæˆåå›¾ç‰‡çš„å®½åº¦ï¼ˆä»¥æœ€å®½çš„ä¸ºå‡†ï¼‰å’Œé«˜åº¦</span></span><br><span class="line">    <span class="keyword">for</span> img_path <span class="keyword">in</span> images:</span><br><span class="line">        <span class="keyword">if</span> os.path.exists(img_path):</span><br><span class="line">            img = Image.open(img_path)</span><br><span class="line">            img = img.resize((<span class="number">712</span>, <span class="number">960</span>))</span><br><span class="line">            width, height = img.size</span><br><span class="line"></span><br><span class="line">            max_width = width * x_number</span><br><span class="line">            total_height = height * y_number</span><br><span class="line"></span><br><span class="line">    <span class="comment"># äº§ç”Ÿä¸€å¼ ç©ºç™½å›¾</span></span><br><span class="line">    new_img = Image.new(<span class="string">'RGB'</span>, (max_width, total_height), <span class="number">255</span>)</span><br><span class="line">    <span class="comment"># åˆå¹¶</span></span><br><span class="line">    x = y = n = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> img_path <span class="keyword">in</span> images:</span><br><span class="line">        <span class="keyword">if</span> os.path.exists(img_path):</span><br><span class="line">            img = Image.open(img_path)</span><br><span class="line">            img = img.resize((<span class="number">712</span>, <span class="number">960</span>))</span><br><span class="line">            width, height = img.size</span><br><span class="line">            <span class="keyword">print</span> width, height</span><br><span class="line">            new_img.paste(img, (x, y))</span><br><span class="line"></span><br><span class="line">            n += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> n % x_number == <span class="number">0</span>:</span><br><span class="line">                y += height</span><br><span class="line">                x = <span class="number">0</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                x += width</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> restriction_max_width <span class="keyword">and</span> max_width &gt;= restriction_max_width:</span><br><span class="line">        <span class="comment"># å¦‚æœå®½å¸¦è¶…è¿‡é™åˆ¶</span></span><br><span class="line">        <span class="comment"># ç­‰æ¯”ä¾‹ç¼©å°</span></span><br><span class="line">        ratio = restriction_max_height / float(max_width)</span><br><span class="line">        max_width = restriction_max_width</span><br><span class="line">        total_height = int(total_height * ratio)</span><br><span class="line">        new_img = image_resize(new_img, size=(max_width, total_height))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> restriction_max_height <span class="keyword">and</span> total_height &gt;= restriction_max_height:</span><br><span class="line">        <span class="comment"># å¦‚æœé«˜åº¦è¶…è¿‡é™åˆ¶</span></span><br><span class="line">        <span class="comment"># ç­‰æ¯”ä¾‹ç¼©å°</span></span><br><span class="line">        ratio = restriction_max_height / float(total_height)</span><br><span class="line">        max_width = int(max_width * ratio)</span><br><span class="line">        total_height = restriction_max_height</span><br><span class="line">        new_img = image_resize(new_img, size=(max_width, total_height))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(output_dir):</span><br><span class="line">        os.makedirs(output_dir)</span><br><span class="line">    save_path = <span class="string">'%s/%s'</span> % (output_dir, output_name)</span><br><span class="line">    new_img.save(save_path)</span><br><span class="line">    <span class="keyword">return</span> save_path</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">import</span> os</span><br><span class="line">    image_files = [ <span class="string">"input/%s"</span> % f <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(<span class="string">"input/"</span>) <span class="keyword">if</span> f.endswith(<span class="string">"pg"</span>) ]</span><br><span class="line"></span><br><span class="line">    image_files = image_files * <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    image_merge(images=image_files)</span><br></pre></td></tr></table></figure>
<p>å°†ä¸¤å¼ èƒŒæ™¯å›¾é‡å </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Image</span><br><span class="line">img = Image.open(<span class="string">"bg.jpeg"</span>)</span><br><span class="line">img2 = Image.open(<span class="string">"merge.jpg"</span>)</span><br><span class="line">merge = Image.blend(img, img2, <span class="number">0.3</span>)</span><br><span class="line">merge.save(<span class="string">"my.jpg"</span>)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/30/black-night-cat/" itemprop="url">
                  é»‘å¤œçš„çŒ«
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-09-30T12:50:22+08:00" content="2015-09-30">
              2015-09-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/æ·«è¯—ä½œå¯¹/" itemprop="url" rel="index">
                    <span itemprop="name">æ·«è¯—ä½œå¯¹</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/30/black-night-cat/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/30/black-night-cat/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/30/black-night-cat/" class="leancloud_visitors" data-flag-title="é»‘å¤œçš„çŒ«">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/uploads/images/photo-1415931633537-351070d20b81.jpeg" alt="é»æ˜"></p>
<blockquote class="blockquote-center"><p>å¤œ</p>
<p>åšå¤œ</p>
<p>è·¯ç¯ä¸‹çš„çŒ«</p>
<p>çŒ«çœ¼ä¸­çš„ç¬‘</p>
<p>åœ¨çƒ¦èº</p>
<p>åœ¨ç…ç†¬</p>
<p>å¦‚åŒï¼Œ ç¾å¥½äº‘é›¾ç¼­ç»•</p>
<p>è¿˜å¥½ï¼Œ ä¸å†ä¸å¯æ•‘è¯</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/30/python-concurrent-high-level-3/" itemprop="url">
                  Python é«˜çº§å¹¶å‘3
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-09-30T11:22:40+08:00" content="2015-09-30">
              2015-09-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/Pythoné«˜çº§å¹¶å‘/" itemprop="url" rel="index">
                    <span itemprop="name">Pythoné«˜çº§å¹¶å‘</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/30/python-concurrent-high-level-3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/30/python-concurrent-high-level-3/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/30/python-concurrent-high-level-3/" class="leancloud_visitors" data-flag-title="Python é«˜çº§å¹¶å‘3">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ¬ç¯‡ä¸»è¦è®²æ¡ˆä¾‹, ä¸¤ä¸ªä½¿ç”¨Concurrent.futureså®ç°çš„å¹¶å‘ï¼Œ ä¸€ä¸ªæ˜¯å¤šçº¿ç¨‹ï¼Œ ä¸€ä¸ªæ˜¯å¤šè¿›ç¨‹ã€‚</p>
<p><strong>å¤šè¿›ç¨‹</strong></p>
<p>ç”¨åœ¨è®¡ç®—å¯†é›†çš„ç¡®å®šLong Numberæ˜¯å¦ä¸º<code>è´¨æ•°</code>çš„ä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> concurrent.futures</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">PRIMES = [</span><br><span class="line">    <span class="number">112272535095293</span>,</span><br><span class="line">    <span class="number">112582705942171</span>,</span><br><span class="line">    <span class="number">112272535095293</span>,</span><br><span class="line">    <span class="number">115280095190773</span>,</span><br><span class="line">    <span class="number">115797848077099</span>,</span><br><span class="line">    <span class="number">1099726899285419</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_prime</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">    sqrt_n = int(math.floor(math.sqrt(n)))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>, sqrt_n + <span class="number">1</span>, <span class="number">2</span>):</span><br><span class="line">        <span class="keyword">if</span> n % i == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">with</span> concurrent.futures.ProcessPoolExecutor() <span class="keyword">as</span> executor:</span><br><span class="line">        <span class="keyword">for</span> number, prime <span class="keyword">in</span> zip(PRIMES, executor.map(is_prime, PRIMES)):</span><br><span class="line">            print(<span class="string">'%d is prime: %s'</span> % (number, prime))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p><strong>å¤šçº¿ç¨‹</strong></p>
<p>ç”¨åœ¨å¤šçº¿ç¨‹è®¿é—®HTTPé“¾æ¥ï¼Œ I/Oå¯†é›†çš„æ—¶å€™</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> concurrent.futures</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">URLS = [<span class="string">'http://jackeygao.com/'</span>,</span><br><span class="line">        <span class="string">'http://pythoner.party/'</span>,</span><br><span class="line">        <span class="string">'http://www.baidu.com/'</span>,</span><br><span class="line">        <span class="string">'http://12306.cn/'</span>,</span><br><span class="line">        <span class="string">'http://china.com/'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Retrieve a single page and report the url and contents</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_url</span><span class="params">(url, timeout)</span>:</span></span><br><span class="line">    res = requests.get(url, timeout=timeout)</span><br><span class="line">    <span class="keyword">return</span> res.text</span><br><span class="line"></span><br><span class="line"><span class="comment"># We can use a with statement to ensure threads are cleaned up promptly</span></span><br><span class="line"><span class="keyword">with</span> concurrent.futures.ThreadPoolExecutor(max_workers=<span class="number">5</span>) <span class="keyword">as</span> executor:</span><br><span class="line">    <span class="comment"># Start the load operations and mark each future with its URL</span></span><br><span class="line">    future_to_url = &#123;executor.submit(load_url, url, <span class="number">60</span>): url <span class="keyword">for</span> url <span class="keyword">in</span> URLS&#125;</span><br><span class="line">    <span class="keyword">for</span> future <span class="keyword">in</span> concurrent.futures.as_completed(future_to_url):</span><br><span class="line">        url = future_to_url[future]</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            data = future.result()</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> exc:</span><br><span class="line">            print(<span class="string">'%r generated an exception: %s'</span> % (url, exc))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'%r page is %d bytes'</span> % (url, len(data)))</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå†…å®¹ä¿®æ”¹è‡ª<a href="https://docs.python.org/3/library/concurrent.futures.html" target="_blank" rel="external">docs.python.org</a></p>
<p><code>ThreadPoolExecutor</code> å’Œ <code>ProcessPoolExecutor</code> éƒ½æ˜¯<code>concurrent.futures.Executor</code>çš„å­ç±»ã€‚ é‚£ä¹ˆä»–ä»¬éƒ½æœ‰<code>submit</code>ã€<code>map</code>ã€<code>shutdown</code>æ–¹æ³•</p>
<p><strong>submit(fn, *args, </strong>kwargs)**</p>
<p>å¼‚æ­¥æ‰§è¡Œå‡½æ•°</p>
<p><strong>å‚æ•°:</strong></p>
<p><strong>fn</strong>      ä¸ºéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°</p>
<p><strong>args</strong>    kwargs  å‡½æ•°çš„å‚æ•°</p>
<p><strong>map(func, *iterables, timeout=None)Â¶</strong></p>
<p>æ­¤mapå‡½æ•°å’Œpythonè‡ªå¸¦çš„mapå‡½æ•°åŠŸèƒ½ç±»ä¼¼ï¼Œåªä¸è¿‡concurrentæ¨¡å—çš„mapå‡½æ•°ä»è¿­ä»£å™¨è·å¾—å‚æ•°åå¼‚æ­¥æ‰§è¡Œã€‚å¹¶ä¸”ï¼Œæ¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œèƒ½ç”¨timeoutå‚æ•°æ¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œtimeoutçš„å€¼å¯ä»¥æ˜¯intæˆ–floatå‹ï¼Œå¦‚æœæ“ä½œtimeoutçš„è¯ï¼Œä¼šraisesTimeoutErrorã€‚å¦‚æœtimeoutå‚æ•°ä¸æŒ‡å®šçš„è¯ï¼Œåˆ™ä¸è®¾ç½®è¶…æ—¶é—´ã€‚</p>
<p><strong>func</strong> ä¸ºéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°</p>
<p><strong>*iterables</strong>  å¯ä»¥æ˜¯ä¸€ä¸ªèƒ½è¿­ä»£çš„å¯¹è±¡ï¼Œä¾‹å¦‚åˆ—è¡¨ç­‰ã€‚æ¯ä¸€æ¬¡funcæ‰§è¡Œï¼Œä¼šä»iterablesä¸­å–å‚æ•°ã€‚</p>
<p><strong>timeout</strong> æ¯ä¸ªå¼‚æ­¥æ“ä½œçš„è¶…æ—¶æ—¶é—´</p>
<p><strong>shutdown(wait=True)</strong></p>
<p>æ­¤å‡½æ•°ç”¨äºé‡Šæ”¾å¼‚æ­¥æ‰§è¡Œæ“ä½œåçš„ç³»ç»Ÿèµ„æºã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/30/python-concurrent-high-level-2/" itemprop="url">
                  Python é«˜çº§å¹¶å‘2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-09-30T11:15:40+08:00" content="2015-09-30">
              2015-09-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/Pythoné«˜çº§å¹¶å‘/" itemprop="url" rel="index">
                    <span itemprop="name">Pythoné«˜çº§å¹¶å‘</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/30/python-concurrent-high-level-2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/30/python-concurrent-high-level-2/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/30/python-concurrent-high-level-2/" class="leancloud_visitors" data-flag-title="Python é«˜çº§å¹¶å‘2">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¸€èˆ¬ç¨‹åºå¹¶å‘åˆ†ä¸º<code>å¤šçº¿ç¨‹</code>å’Œ<code>å¤šè¿›ç¨‹</code>å¹¶å‘.</p>
<p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™é€‰æ‹©ä¸¤ç§å¹¶å‘æ‰‹æ®µï¼Œ è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Œ åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æ ¹æ®ç¼–ç¨‹é€»è¾‘ä¸€èˆ¬éœ€è¦è®¡ç®—å¯†é›†å’ŒI/Oæ“ä½œå¯†é›†çš„æ—¶å€™é€‰æ‹©å¹¶å‘æé«˜ç¨‹åºæ•ˆç‡ï¼Œ Python ç”±äºGILçš„é™åˆ¶ï¼Œå¯†é›†æ€§è¿ç®—éœ€è¦ä½¿ç”¨å¤šæ ¸å¿ƒCPUæ—¶å€™ï¼Œ è¿™æ—¶å€™å¤šçº¿ç¨‹æ˜¾å¾—åŠ›ä¸ä»å¿ƒï¼Œ ç”šè‡³ä¼šå˜å¾—æ›´æ…¢ã€‚è€Œå½“éœ€è¦I/Oæ“ä½œï¼Œ æ¯”å¦‚HTTPé•¿è¿æ¥çš„æ—¶å€™ï¼Œ è€—è´¹çš„æ—¶é—´åªæ˜¯TCPå»ºç«‹é“¾æ¥çš„ç­‰å¾…æ—¶é—´ï¼Œ è¿™æ—¶å€™å½“ç„¶ä¼˜å…ˆä½¿ç”¨å¤šçº¿ç¨‹ã€‚</p>
<p>æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ æˆ‘ä»¬å¼€å‘ç¨‹åºè€—è´¹æ¯”è¾ƒæ…¢çš„æ˜¯<code>è®¡ç®—å¯†é›†</code>å’Œ<code>I/Oå¯†é›†</code>ä¸¤ç§æƒ…å†µä¸‹çš„é€»è¾‘ï¼Œ é‚£ä¹ˆæˆ‘å¯ä»¥é‡‡å–ï¼š</p>
<ul>
<li>è®¡ç®—å¯†é›†:å¤šè¿›ç¨‹</li>
<li>I/Oå¯†é›†:å¤šçº¿ç¨‹</li>
</ul>
<p>æ¨èä½¿ç”¨åº“ï¼š</p>
<p>concurrent.futures æ˜¯python3æ–°å¢åŠ çš„ä¸€ä¸ªåº“ï¼Œç”¨äºå¹¶å‘å¤„ç†ï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€é‡Œçš„çº¿ç¨‹æ± ï¼ˆä¹Ÿæœ‰ä¸€ä¸ªè¿›ç¨‹æ± ï¼‰ï¼Œä»–å±äºä¸Šå±‚çš„å°è£…ï¼Œå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œä¸ç”¨åœ¨è€ƒè™‘é‚£ä¹ˆå¤šä¸œè¥¿äº†, ç°å·²åŠ å…¥python 3.2æ ‡å‡†åº“ï¼Œ python 2.7éœ€è¦å®‰è£…ä¸€ä¸‹ã€‚</p>
<p><code>pip install futures</code></p>
<p>Executor:ä¸¤ä¸ªå­<code>ThreadPoolExecutor</code>å’Œ<code>ProcessPoolExecutor</code>åˆ†åˆ«æ˜¯äº§ç”Ÿè¿›ç¨‹æ± å’Œçº¿ç¨‹æ± </p>
<p>Futureï¼šæœ‰Executor.submitäº§ç”Ÿå¤šä»»åŠ¡</p>
<p>ThreadPoolExecutor å’Œ ProcessPoolExecutorç›´æ¥pythonçš„with as æ§åˆ¶æµè¯­å¥ï¼Œ è®©ä½ éå¸¸ç®€å•çš„å°±å¥—å…¥äº†ç¨‹åºé‡Œé¢ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/30/python-concurrent-high-level/" itemprop="url">
                  Python é«˜çº§å¹¶å‘
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-09-30T10:15:40+08:00" content="2015-09-30">
              2015-09-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/Pythoné«˜çº§å¹¶å‘/" itemprop="url" rel="index">
                    <span itemprop="name">Pythoné«˜çº§å¹¶å‘</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/30/python-concurrent-high-level/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/30/python-concurrent-high-level/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/30/python-concurrent-high-level/" class="leancloud_visitors" data-flag-title="Python é«˜çº§å¹¶å‘">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å¹¶å‘çº§åˆ«å½’çº³ä¸ºä¸‹åˆ—ä¸‰ç§ï¼š</p>
<h2 id="å¹¶å‘çš„å½’ç±»">å¹¶å‘çš„å½’ç±»</h2><h3 id="ä½çº§å¹¶å‘(Low-level_Concurrency)">ä½çº§å¹¶å‘(Low-level Concurrency)</h3><p>å°±æ˜¯ç›´æ¥ç”¨ã€åŸå­æ“ä½œã€(atomic operation)æ‰€å®ç°çš„å¹¶å‘ã€‚è¿™ç§å¹¶å‘æ˜¯ç»™ç¨‹åºåº“çš„ç¼–å†™è€…ç”¨çš„ï¼Œ è€Œåº”ç”¨ç¨‹åºå¼€å‘è€…åˆ™ä¸éœ€è¦å®ƒï¼Œå› ä¸ºè¿™ç§å†™æ³•å¾ˆå®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”æéš¾è°ƒè¯•ã€‚è™½è¯´Pythonæœ¬èº«çš„å¹¶å‘æœºåˆ¶ä¸€èˆ¬æ˜¯ç”¨åº•å±‚çš„æ“ä½œå®ç°çš„ï¼Œ ä½†å¼€å‘è€…ä¸èƒ½ç”¨Pythonè¯­è¨€ç¼–å†™è¿™ç§çº§åˆ«çš„å¹¶å‘ä»£ç ã€‚</p>
<h3 id="ä¸­çº§å¹¶å‘(Mid-level_Concurrency)">ä¸­çº§å¹¶å‘(Mid-level Concurrency)</h3><p>ä¸ç›´æ¥ä½¿ç”¨åŸå­æ“ä½œï¼Œ ä½†å´ä¼šç›´æ¥ä½¿ç”¨â€é”â€ï¼ˆlockï¼‰,å¤§å¤šæ•°è¯­è¨€æä¾›çš„éƒ½æ˜¯è¿™ç§çº§åˆ«çš„å¹¶å‘ã€‚Pythonçš„threading.Semaphoreã€threading.LockåŠmultiprocessing.Lockç­‰ç±»éƒ½æ”¯æŒä¸­çº§å¹¶å‘ã€‚å¼€å‘åº”ç”¨ç¨‹åºçš„äººä¸€èˆ¬éƒ½ä¼šä½¿ç”¨ç»ˆæå¹¶å‘ï¼Œå› ä¸ºä»–ä»¬é€šå¸¸åªèƒ½ä½¿ç”¨è¿™ä¸ªçº§åˆ«çš„å¹¶å‘åŠŸèƒ½ã€‚</p>
<h3 id="é«˜çº§å¹¶å‘(High-level_Concurrency)">é«˜çº§å¹¶å‘(High-level Concurrency)</h3><p>æ—¢ä¸ç›´æ¥ä½¿ç”¨åŸå­æ“ä½œï¼Œ ä¹Ÿä¸ç›´æ¥ä½¿ç”¨é”(é”ä¸åŸå­æ“ä½œå¯èƒ½åœ¨å¹•åä½¿ç”¨ï¼Œ ä½†å¼€å‘è€…æ— é¡»å…³æ³¨è¿™äº›ã€‚)ç›®å‰å·²ç»æœ‰ç¼–ç¨‹è¯­è¨€å¼€å§‹æ”¯æŒé«˜çº§å¹¶å‘äº†ã€‚ä»3.2ç‰ˆæœ¬èµ·ï¼ŒPythonæä¾›äº†æ”¯æŒé«˜çº§å¹¶å‘çš„concurrent.futuresæ¨¡å—ï¼Œæ­¤å¤–ï¼Œ queue.QueueåŠmultiprocessingè¿™ä¸¤ä¸ªã€é˜Ÿåˆ—é›†åˆç±»ã€(queue collection class)ä¹Ÿæ”¯æŒé«˜çº§å¹¶å‘.</p>
<h2 id="è§è§£">è§è§£</h2><h3 id="ä¸­çº§å¹¶å‘ç—›ç‚¹">ä¸­çº§å¹¶å‘ç—›ç‚¹</h3><p>ä¸­çº§å¹¶å‘æ˜¯æˆ‘ç»å¸¸ä½¿ç”¨çš„ï¼Œ è¿™ç§å¹¶å‘ç­‰çº§è™½è¯´ä½¿ç”¨èµ·æ¥ç›¸å¯¹ä½çº§å¹¶å‘ç®€å•ï¼Œ ä½†å¾ˆå®¹æ˜“å‡ºé”™ï¼Œ å®¹æ˜“å‡ºç°é‚£ç§éš¾äºè¿½è¸ªè€Œä¸”è°ƒè¯•èµ·æ¥éå¸¸å¤æ‚ã€‚æ­¤å¤–è¿˜ä¼šå¯¼è‡´ç¨‹åºè«åçš„å´©æºƒã€å¤±å»å“åº”(frozen)æˆ–è€…åƒµå°¸(zombie)è¿›ç¨‹.</p>
<h3 id="å…³äºä¸­çº§å¹¶å‘å»ºè®®">å…³äºä¸­çº§å¹¶å‘å»ºè®®</h3><p>å…³é”®é—®é¢˜å¤„åœ¨å…±äº«æ•°æ®ä¸Šé¢ã€‚å¦‚æœå…±äº«æ•°æ®å¯ä»¥ä¿®æ”¹ï¼Œé‚£ä¹ˆå¿…é¡»ç”¨é”æ¥ä¿æŠ¤ï¼Œä»¥ç¡®ä¿æ‰€æœ‰çº¿ç¨‹å’Œè¿›ç¨‹éƒ½èƒ½æŒ‰ç…§é¡ºåºæ¥å­˜å–å®ƒ(ä¹Ÿå°±æ˜¯è¯´ä½ å¿…é¡»åœ¨ç¨‹åºé‡Œé¢æ§åˆ¶å¥½åŒä¸€æ—¶åˆ»å¿…é¡»æœ‰ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹è®¿é—®è¿™ä»½æ•°æ®)ã€‚å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹è¯•å›¾è®¿é—®åŒä¸€ä»½å…±äº«æ•°æ®ï¼Œ é‚£ä¹ˆåªæœ‰å…¶ä¸­ä¸€ä¸ªèƒ½å¤Ÿè·å–åˆ°ï¼Œ è€Œå…¶ä»–çš„éƒ½ä¼šé˜»å¡(ä¹Ÿå°±æ˜¯è¿›å»ã€ç©ºé—²çŠ¶æ€ã€(idle)çŠ¶æ€)ã€‚è¿™å°±æ„å‘³ç€å½“é”å®šæœºåˆ¶ç”Ÿæ•ˆæ—¶ï¼Œ åº”ç”¨ç¨‹åºåªæœ‰ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹èµ·ä½œç”¨(è¿™å°±å˜å¾—å’Œéå¹¶å‘ç¨‹åºç±»ä¼¼äº†)ï¼Œå…¶ä½™éƒ½å¾—ç­‰å¾…ã€‚ç”±æ­¤å¯è§æˆ‘ä»¬åº”è¯¥è¿›ç¨‹å°‘ç”¨é”ï¼Œå³ä¾¿è¦ç”¨ä¹Ÿä¸è¦æ—¶é—´å¤ªé•¿,æœ€ç®€å•çš„æ–¹æ³•æ˜¯æ ¹æœ¬ä¸è¦åˆ†äº«å¯ä»¥ä¿®æ”¹çš„æ•°æ®ï¼Œ ä½¿è¿›ç¨‹æœ¬èº«åªåšè¿ç®—ï¼Œå’ŒI/Oæ“ä½œï¼Œ æ“ä½œå®Œåè¿”å›ç»“æœã€‚è¿™æ ·å°±ä¸ç”¨åŠ é”äº†ï¼Œ è€Œå¤§éƒ¨åˆ†å¹¶å‘é—®é¢˜ä¹Ÿå°±éšä¹‹æ¶ˆå¤±äº†.</p>
<h3 id="é«˜çº§å¹¶å‘">é«˜çº§å¹¶å‘</h3><p>åé¢ä¼šè¿½åŠ ä¸€äº›é«˜çº§å¹¶å‘ï¼Œ å¯¹äºPythonæ¥è¯´é«˜çº§å¹¶å‘æ‰æ˜¾å¾—<code>Pythonic</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/30/My-New-Post/" itemprop="url">
                  My New Post
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-09-30T10:11:01+08:00" content="2015-09-30">
              2015-09-30
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/30/My-New-Post/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/30/My-New-Post/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/30/My-New-Post/" class="leancloud_visitors" data-flag-title="My New Post">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è¿™æ˜¯ç¬¬ä¸€ç¯‡æ—¥è®°ï¼Œ ä»…ä»…ä¸ºäº†æµ‹è¯•.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="JackeyGao" />
          <p class="site-author-name" itemprop="name">JackeyGao</p>
          <p class="site-description motion-element" itemprop="description">JackeyGaoçš„æ—¥è®°æœ¬</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">20</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jackeyGao" target="_blank">
                  
                    <i class="fa fa-globe"></i> Github
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="gaojunqi@outlook.com" target="_blank">
                  
                    <i class="fa fa-envelope"></i> Email
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/JackeyGaoQ" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/JackeyGaoo" target="_blank">
                  
                    <i class="fa fa-twitter"></i> Twitter
                  
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jackey Gao</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="http://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.4.5.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.4.5.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.4.5.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"jackeygao"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("yf0s3ONpEsCybQxnLE1hvYLz-gzGzoHsz", "86yi2o6lVtLREC5KqYklEbMR");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
